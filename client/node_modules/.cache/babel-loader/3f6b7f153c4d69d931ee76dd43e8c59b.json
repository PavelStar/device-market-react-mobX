{"ast":null,"code":"import _slicedToArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{observer}from\"mobx-react-lite\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router\";import ResponseDataState from\"../../../store/ResponseDataState\";import ColorSelect from\"./ColorSelect/ColorSelect\";import MemorySelect from\"./MemorySelect/MemorySelect\";import\"./ProductSelects.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductSelects=observer(function(_ref){var product=_ref.product;var navigate=useNavigate();var responseData=ResponseDataState.responseData;var color=product.color,title=product.title;var _useState=useState(),_useState2=_slicedToArray(_useState,2),productsWithSameTitle=_useState2[0],setProductsWithSameTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),colorsList=_useState4[0],setColorsList=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),memoryList=_useState6[0],setMemoryList=_useState6[1];useEffect(function(){responseData&&setProductsWithSameTitle(responseData.items.filter(function(item){return item.title===product.title;}));},[]);useEffect(function(){var colors=[];productsWithSameTitle&&productsWithSameTitle.forEach(function(item){if(title===item.title&&!colors.includes(item.color)){colors.push(item.color);}});setColorsList(colors);var memories=[];productsWithSameTitle&&productsWithSameTitle.forEach(function(item){if(title===item.title&&color===item.color){memories.push(item.features.memory);}});setMemoryList(memories);},[productsWithSameTitle]);var onSelectHandleChange=function onSelectHandleChange(selectValue,selectType){if(selectType===\"color\"){var foundedItem=productsWithSameTitle===null||productsWithSameTitle===void 0?void 0:productsWithSameTitle.find(function(item){return item.color===selectValue&&item.features.memory===product.features.memory;});navigate(\"/item/\".concat(foundedItem&&foundedItem.id));}if(selectType===\"memory\"){var _foundedItem=productsWithSameTitle===null||productsWithSameTitle===void 0?void 0:productsWithSameTitle.find(function(item){return item.color===product.color&&item.features.memory===selectValue;});navigate(\"/item/\".concat(_foundedItem&&_foundedItem.id));}};return/*#__PURE__*/_jsx(\"div\",{className:\"product-selects\",children:/*#__PURE__*/_jsx(\"div\",{className:\"product-selects__inner\",children:colorsList&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ColorSelect,{colorsList:colorsList,onSelectHandleChange:onSelectHandleChange}),product.features.memory&&memoryList&&/*#__PURE__*/_jsx(MemorySelect,{memoryList:memoryList,onSelectHandleChange:onSelectHandleChange})]})})});});export default ProductSelects;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/Product/ProductSelects/ProductSelects.tsx"],"names":["observer","useEffect","useState","useNavigate","ResponseDataState","ColorSelect","MemorySelect","ProductSelects","product","navigate","responseData","color","title","productsWithSameTitle","setProductsWithSameTitle","colorsList","setColorsList","memoryList","setMemoryList","items","filter","item","colors","forEach","includes","push","memories","features","memory","onSelectHandleChange","selectValue","selectType","foundedItem","find","id"],"mappings":"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","sourcesContent":["import { observer } from \"mobx-react-lite\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { IItemData } from \"../../../interfaces/IItemData\";\r\nimport ProductSelectsState from \"../../../store/ProductSelectsState\";\r\nimport ResponseDataState from \"../../../store/ResponseDataState\";\r\nimport ColorSelect from \"./ColorSelect/ColorSelect\";\r\nimport MemorySelect from \"./MemorySelect/MemorySelect\";\r\nimport \"./ProductSelects.scss\";\r\n\r\nconst ProductSelects = observer(({ product }: { product: IItemData }) => {\r\n    const navigate = useNavigate();\r\n\r\n    const { responseData } = ResponseDataState;\r\n    const { color, title } = product;\r\n\r\n    const [productsWithSameTitle, setProductsWithSameTitle] = useState<IItemData[] | undefined>();\r\n    const [colorsList, setColorsList] = useState<string[] | undefined>();\r\n    const [memoryList, setMemoryList] = useState<string[] | undefined>();\r\n\r\n    useEffect(() => {\r\n        responseData && setProductsWithSameTitle(responseData.items.filter((item) => item.title === product.title));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        let colors: string[] = [];\r\n        productsWithSameTitle &&\r\n            productsWithSameTitle.forEach((item: IItemData) => {\r\n                if (title === item.title && !colors.includes(item.color)) {\r\n                    colors.push(item.color);\r\n                }\r\n            });\r\n\r\n        setColorsList(colors);\r\n\r\n        let memories: string[] = [];\r\n        productsWithSameTitle &&\r\n            productsWithSameTitle.forEach((item: IItemData) => {\r\n                if (title === item.title && color === item.color) {\r\n                    memories.push(item.features.memory);\r\n                }\r\n            });\r\n        setMemoryList(memories);\r\n    }, [productsWithSameTitle]);\r\n\r\n    const onSelectHandleChange = (selectValue: string, selectType: string) => {\r\n        if (selectType === \"color\") {\r\n            let foundedItem = productsWithSameTitle?.find(\r\n                (item) => item.color === selectValue && item.features.memory === product.features.memory\r\n            );\r\n            navigate(`/item/${foundedItem && foundedItem.id}`);\r\n        }\r\n\r\n        if (selectType === \"memory\") {\r\n            let foundedItem = productsWithSameTitle?.find(\r\n                (item) => item.color === product.color && item.features.memory === selectValue\r\n            );\r\n            navigate(`/item/${foundedItem && foundedItem.id}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"product-selects\">\r\n            <div className=\"product-selects__inner\">\r\n                {colorsList && (\r\n                    <>\r\n                        <ColorSelect colorsList={colorsList} onSelectHandleChange={onSelectHandleChange} />\r\n                        {product.features.memory && memoryList && (\r\n                            <MemorySelect memoryList={memoryList} onSelectHandleChange={onSelectHandleChange} />\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default ProductSelects;\r\n"]},"metadata":{},"sourceType":"module"}