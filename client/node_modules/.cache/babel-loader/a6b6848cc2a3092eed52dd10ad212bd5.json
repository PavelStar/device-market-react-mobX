{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useParams}from\"react-router-dom\";import{observer}from\"mobx-react-lite\";import ToCartBtn from\"../../components/buttons/ToCartBtn/ToCartBtn\";import ItemDataState from\"../../store/ItemDataState\";import ReviewsList from\"../../components/ReviewsList/ReviewsList\";import ProductPrice from\"../../components/ProductPrice/ProductPrice\";import ProductRating from\"../../components/ProductRating/ProductRating\";import Features from\"../../components/Features/Features\";import TabsList from\"../../components/TabsList/TabsList\";import\"react-image-gallery/styles/css/image-gallery.css\";import\"./ProductPage.scss\";import ProductSelects from\"../../components/Product/ProductSelects/ProductSelects\";import ProductGallery from\"../../components/Product/ProductGallery/ProductGallery\";import ApiService from\"../../API/ApiService\";import ResponseDataState from\"../../store/ResponseDataState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductPage=observer(function(){var apiService=new ApiService();var responseData=ResponseDataState.responseData;var itemData=ItemDataState.itemData,urlName=ItemDataState.urlName;var _useState=useState(\"features\"),_useState2=_slicedToArray(_useState,2),tabName=_useState2[0],setTabName=_useState2[1];var navigate=useNavigate();var params=useParams();useEffect(function(){if(!responseData){var responseFn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return apiService.getData();case 2:data=_context.sent;ResponseDataState.setResponseData(data);data===null||data===void 0?void 0:data.items.find(function(item){String(item.id)===params.id&&ItemDataState.setItemData(item);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function responseFn(){return _ref.apply(this,arguments);};}();responseFn();}else{responseData===null||responseData===void 0?void 0:responseData.items.find(function(item){String(item.id)===params.id&&ItemDataState.setItemData(item);});}return function(){ItemDataState.setItemData(undefined);};},[params]);return/*#__PURE__*/_jsx(_Fragment,{children:itemData&&/*#__PURE__*/_jsx(\"div\",{className:\"product-page\",children:itemData.title&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__top-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"product-page__links\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__links-inner\",children:[/*#__PURE__*/_jsx(Link,{to:\"/category\",className:\"product-page__category-link\",onClick:function onClick(){return navigate(\"/category\");},children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"}),/*#__PURE__*/_jsx(\"span\",{children:\"/\"}),/*#__PURE__*/_jsx(\"p\",{className:\"product-page__current-link\",children:itemData.title})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"product-page__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__main-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-img-gallery\",children:/*#__PURE__*/_jsx(ProductGallery,{itemData:itemData})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__about-wrap\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"product-page__title\",children:[\"\".concat(itemData.categoryType,\" \").concat(itemData.title,\", \").concat(itemData.features.memory),/*#__PURE__*/_jsx(\"span\",{children:itemData.color&&\", \".concat(itemData.color)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-page__price-wrap\",children:/*#__PURE__*/_jsx(ProductRating,{rating:itemData.rating})})]}),/*#__PURE__*/_jsx(ProductSelects,{product:itemData}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__price-inner\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"item-card__price-title\",children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsx(ProductPrice,{priceInfo:itemData.priceInfo,isAvailable:itemData.isAvailable}),/*#__PURE__*/_jsx(ToCartBtn,{toCartItem:itemData})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-page__bottom-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"product-page__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-page__data-tabs\",children:[/*#__PURE__*/_jsx(TabsList,{tabName:tabName,setTabName:setTabName}),/*#__PURE__*/_jsx(\"div\",{className:\"data-tabs__results\",children:tabName===\"features\"&&/*#__PURE__*/_jsx(Features,{features:itemData.features})}),/*#__PURE__*/_jsx(\"div\",{className:\"data-tabs__results\",children:tabName===\"reviews\"&&/*#__PURE__*/_jsx(ReviewsList,{reviewData:itemData.reviewsInfo.reviews})})]})})})]})})});});export default ProductPage;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/pages/ProductPage/ProductPage.tsx"],"names":["React","useEffect","useState","Link","useNavigate","useParams","observer","ToCartBtn","ItemDataState","ReviewsList","ProductPrice","ProductRating","Features","TabsList","ProductSelects","ProductGallery","ApiService","ResponseDataState","ProductPage","apiService","responseData","itemData","urlName","tabName","setTabName","navigate","params","responseFn","getData","data","setResponseData","items","find","item","String","id","setItemData","undefined","title","categoryType","features","memory","color","rating","priceInfo","isAvailable","reviewsInfo","reviews"],"mappings":"igBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAA4BC,WAA5B,CAAyCC,SAAzC,KAA0D,kBAA1D,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8CAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,2BAA1B,CACA,MAAOC,CAAAA,WAAP,KAAwB,0CAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,4CAAzB,CACA,MAAOC,CAAAA,aAAP,KAA0B,8CAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,oCAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oCAArB,CAEA,MAAO,kDAAP,CAEA,MAAO,oBAAP,CACA,MAAOC,CAAAA,cAAP,KAA2B,wDAA3B,CACA,MAAOC,CAAAA,cAAP,KAA2B,wDAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,+BAA9B,C,6IAIA,GAAMC,CAAAA,WAAoC,CAAGZ,QAAQ,CAAC,UAAM,CAC3D,GAAMa,CAAAA,UAAU,CAAG,GAAIH,CAAAA,UAAJ,EAAnB,CACA,GAAQI,CAAAA,YAAR,CAAyBH,iBAAzB,CAAQG,YAAR,CACA,GAAQC,CAAAA,QAAR,CAA8Bb,aAA9B,CAAQa,QAAR,CAAkBC,OAAlB,CAA8Bd,aAA9B,CAAkBc,OAAlB,CAEA,cAA8BpB,QAAQ,CAAC,UAAD,CAAtC,wCAAOqB,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,QAAQ,CAAGrB,WAAW,EAA5B,CACA,GAAMsB,CAAAA,MAAM,CAAGrB,SAAS,EAAxB,CAIAJ,SAAS,CAAC,UAAM,CAEf,GAAI,CAACmB,YAAL,CAAmB,CAClB,GAAMO,CAAAA,UAAU,0FAAG,kKACCR,CAAAA,UAAU,CAACS,OAAX,EADD,QACZC,IADY,eAElBZ,iBAAiB,CAACa,eAAlB,CAAkCD,IAAlC,EACAA,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEE,KAAN,CAAYC,IAAZ,CAAiB,SAACC,IAAD,CAAU,CAC1BC,MAAM,CAACD,IAAI,CAACE,EAAN,CAAN,GAAoBT,MAAM,CAACS,EAA3B,EAAiC3B,aAAa,CAAC4B,WAAd,CAA0BH,IAA1B,CAAjC,CACA,CAFD,EAHkB,sDAAH,kBAAVN,CAAAA,UAAU,0CAAhB,CAOAA,UAAU,GACV,CATD,IASO,CACNP,YAAY,OAAZ,EAAAA,YAAY,SAAZ,QAAAA,YAAY,CAAEW,KAAd,CAAoBC,IAApB,CAAyB,SAACC,IAAD,CAAU,CAClCC,MAAM,CAACD,IAAI,CAACE,EAAN,CAAN,GAAoBT,MAAM,CAACS,EAA3B,EAAiC3B,aAAa,CAAC4B,WAAd,CAA0BH,IAA1B,CAAjC,CACA,CAFD,EAGA,CAED,MAAO,WAAM,CACZzB,aAAa,CAAC4B,WAAd,CAA0BC,SAA1B,EACA,CAFD,CAGA,CApBQ,CAoBN,CAACX,MAAD,CApBM,CAAT,CAsBA,mBACC,yBACEL,QAAQ,eACR,YAAK,SAAS,CAAC,cAAf,UACEA,QAAQ,CAACiB,KAAT,eACA,aAAK,SAAS,CAAC,qBAAf,wBACC,aAAK,SAAS,CAAC,wBAAf,wBACC,YAAK,SAAS,CAAC,WAAf,uBACC,YAAK,SAAS,CAAC,qBAAf,uBACC,aAAK,SAAS,CAAC,2BAAf,wBACC,KAAC,IAAD,EACC,EAAE,CAAC,WADJ,CAEC,SAAS,CAAC,6BAFX,CAGC,OAAO,CAAE,yBAAMb,CAAAA,QAAQ,CAAC,WAAD,CAAd,EAHV,wDADD,cAQC,2BARD,cASC,UAAG,SAAS,CAAC,4BAAb,UAA2CJ,QAAQ,CAACiB,KAApD,EATD,GADD,EADD,EADD,cAiBC,YAAK,SAAS,CAAC,yBAAf,uBACC,aAAK,SAAS,CAAC,yBAAf,wBACC,YAAK,SAAS,CAAC,qBAAf,uBACC,KAAC,cAAD,EAAgB,QAAQ,CAAEjB,QAA1B,EADD,EADD,cAIC,aAAK,SAAS,CAAC,0BAAf,wBACC,YAAI,SAAS,CAAC,qBAAd,qBACKA,QAAQ,CAACkB,YADd,aAC8BlB,QAAQ,CAACiB,KADvC,cACiDjB,QAAQ,CAACmB,QAAT,CAAkBC,MADnE,eAEC,sBAAOpB,QAAQ,CAACqB,KAAT,cAAuBrB,QAAQ,CAACqB,KAAhC,CAAP,EAFD,GADD,cAKC,YAAK,SAAS,CAAC,0BAAf,uBACC,KAAC,aAAD,EAAe,MAAM,CAAErB,QAAQ,CAACsB,MAAhC,EADD,EALD,GAJD,cAaC,KAAC,cAAD,EAAgB,OAAO,CAAEtB,QAAzB,EAbD,cAcC,aAAK,SAAS,CAAC,2BAAf,wBACC,UAAG,SAAS,CAAC,wBAAb,uCADD,cAEC,KAAC,YAAD,EACC,SAAS,CAAEA,QAAQ,CAACuB,SADrB,CAEC,WAAW,CAAEvB,QAAQ,CAACwB,WAFvB,EAFD,cAMC,KAAC,SAAD,EAAW,UAAU,CAAExB,QAAvB,EAND,GAdD,GADD,EAjBD,GADD,cA6CC,YAAK,SAAS,CAAC,2BAAf,uBACC,YAAK,SAAS,CAAC,yBAAf,uBACC,aAAK,SAAS,CAAC,yBAAf,wBACC,KAAC,QAAD,EAAU,OAAO,CAAEE,OAAnB,CAA4B,UAAU,CAAEC,UAAxC,EADD,cAEC,YAAK,SAAS,CAAC,oBAAf,UACED,OAAO,GAAK,UAAZ,eAA0B,KAAC,QAAD,EAAU,QAAQ,CAAEF,QAAQ,CAACmB,QAA7B,EAD5B,EAFD,cAKC,YAAK,SAAS,CAAC,oBAAf,UACEjB,OAAO,GAAK,SAAZ,eACA,KAAC,WAAD,EAAa,UAAU,CAAEF,QAAQ,CAACyB,WAAT,CAAqBC,OAA9C,EAFF,EALD,GADD,EADD,EA7CD,GAFF,EAFF,EADD,CAuEA,CAzGoD,CAArD,CA2GA,cAAe7B,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react-lite\";\nimport ToCartBtn from \"../../components/buttons/ToCartBtn/ToCartBtn\";\nimport ItemDataState from \"../../store/ItemDataState\";\nimport ReviewsList from \"../../components/ReviewsList/ReviewsList\";\nimport ProductPrice from \"../../components/ProductPrice/ProductPrice\";\nimport ProductRating from \"../../components/ProductRating/ProductRating\";\nimport Features from \"../../components/Features/Features\";\nimport TabsList from \"../../components/TabsList/TabsList\";\n\nimport \"react-image-gallery/styles/css/image-gallery.css\";\nimport ProductSelectsState from \"../../store/ProductSelectsState\";\nimport \"./ProductPage.scss\";\nimport ProductSelects from \"../../components/Product/ProductSelects/ProductSelects\";\nimport ProductGallery from \"../../components/Product/ProductGallery/ProductGallery\";\nimport ApiService from \"../../API/ApiService\";\nimport ResponseDataState from \"../../store/ResponseDataState\";\nimport { IItemData } from \"../../interfaces/IItemData\";\nimport NotFound from \"../NotFound/NotFound\";\n\nconst ProductPage: React.FunctionComponent = observer(() => {\n\tconst apiService = new ApiService();\n\tconst { responseData } = ResponseDataState;\n\tconst { itemData, urlName } = ItemDataState;\n\n\tconst [tabName, setTabName] = useState(\"features\");\n\n\tconst navigate = useNavigate();\n\tconst params = useParams();\n\n\n\n\tuseEffect(() => {\n\n\t\tif (!responseData) {\n\t\t\tconst responseFn = async () => {\n\t\t\t\tconst data = await apiService.getData();\n\t\t\t\tResponseDataState.setResponseData(data);\n\t\t\t\tdata?.items.find((item) => {\n\t\t\t\t\tString(item.id) === params.id && ItemDataState.setItemData(item);\n\t\t\t\t});\n\t\t\t};\n\t\t\tresponseFn();\n\t\t} else {\n\t\t\tresponseData?.items.find((item) => {\n\t\t\t\tString(item.id) === params.id && ItemDataState.setItemData(item);\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\tItemDataState.setItemData(undefined);\n\t\t};\n\t}, [params]);\n\n\treturn (\n\t\t<>\n\t\t\t{itemData && (\n\t\t\t\t<div className=\"product-page\">\n\t\t\t\t\t{itemData.title && (\n\t\t\t\t\t\t<div className=\"product-page__inner\">\n\t\t\t\t\t\t\t<div className=\"product-page__top-wrap\">\n\t\t\t\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t\t\t\t<div className=\"product-page__links\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"product-page__links-inner\">\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\tto=\"/category\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"product-page__category-link\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => navigate(\"/category\")}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tКаталог\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t<span>/</span>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"product-page__current-link\">{itemData.title}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"product-page__container\">\n\t\t\t\t\t\t\t\t\t<div className=\"product-page__main-wrap\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"product-img-gallery\">\n\t\t\t\t\t\t\t\t\t\t\t<ProductGallery itemData={itemData} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"product-page__about-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className=\"product-page__title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{`${itemData.categoryType} ${itemData.title}, ${itemData.features.memory}`}\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{itemData.color && `, ${itemData.color}`}</span>\n\t\t\t\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"product-page__price-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t<ProductRating rating={itemData.rating} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<ProductSelects product={itemData} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"product-page__price-inner\">\n\t\t\t\t\t\t\t\t\t\t\t<b className=\"item-card__price-title\">Цена:</b>\n\t\t\t\t\t\t\t\t\t\t\t<ProductPrice\n\t\t\t\t\t\t\t\t\t\t\t\tpriceInfo={itemData.priceInfo}\n\t\t\t\t\t\t\t\t\t\t\t\tisAvailable={itemData.isAvailable}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<ToCartBtn toCartItem={itemData} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"product-page__bottom-wrap\">\n\t\t\t\t\t\t\t\t<div className=\"product-page__container\">\n\t\t\t\t\t\t\t\t\t<div className=\"product-page__data-tabs\">\n\t\t\t\t\t\t\t\t\t\t<TabsList tabName={tabName} setTabName={setTabName} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"data-tabs__results\">\n\t\t\t\t\t\t\t\t\t\t\t{tabName === \"features\" && <Features features={itemData.features} />}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"data-tabs__results\">\n\t\t\t\t\t\t\t\t\t\t\t{tabName === \"reviews\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t<ReviewsList reviewData={itemData.reviewsInfo.reviews} />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n});\n\nexport default ProductPage;\n"]},"metadata":{},"sourceType":"module"}