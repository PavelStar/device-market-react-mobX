{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{observer}from\"mobx-react-lite\";import React,{useEffect,useState}from\"react\";import CartState from\"../../../store/CartState\";import CartIcon from\"../../svg/CartIcon\";import RemoveFromCartIcon from\"../../svg/RemoveFromCartIcon\";import\"./ToCartBtn.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ToCartBtn=observer(function(_ref){var toCartItem=_ref.toCartItem,isBtnLite=_ref.isBtnLite;var cartItems=CartState.cartItems,priceSum=CartState.priceSum;var _toCartItem$priceInfo=toCartItem.priceInfo,fullPrice=_toCartItem$priceInfo.fullPrice,discountAmount=_toCartItem$priceInfo.discountAmount;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isItemInCart=_useState2[0],setIsItemInCart=_useState2[1];useEffect(function(){setIsItemInCart(false);cartItems.forEach(function(i){if(i.itemData.id===toCartItem.id){setIsItemInCart(true);}});});var addToCart=function addToCart(){CartState.setCartItems(_toConsumableArray(cartItems.concat({count:1,itemData:toCartItem})));};var removeFromCart=function removeFromCart(){var deleteCount;CartState.setCartItems(_toConsumableArray(cartItems.filter(function(i){if(i.itemData.id===toCartItem.id)deleteCount=i.count;return i.itemData.id!==toCartItem.id;})));};return/*#__PURE__*/_jsx(_Fragment,{children:isItemInCart?/*#__PURE__*/_jsx(\"button\",{className:\"to-cart-btn to-cart-btn--remove\",onClick:removeFromCart,children:isBtnLite?/*#__PURE__*/_jsx(RemoveFromCartIcon,{}):'Удалить из корзины'}):/*#__PURE__*/_jsxs(\"button\",{className:\"to-cart-btn\",onClick:addToCart,children:[!isBtnLite&&\"В корзину\",\" \",/*#__PURE__*/_jsx(CartIcon,{})]})});});export default ToCartBtn;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/buttons/ToCartBtn/ToCartBtn.tsx"],"names":["observer","React","useEffect","useState","CartState","CartIcon","RemoveFromCartIcon","ToCartBtn","toCartItem","isBtnLite","cartItems","priceSum","priceInfo","fullPrice","discountAmount","isItemInCart","setIsItemInCart","forEach","i","itemData","id","addToCart","setCartItems","concat","count","removeFromCart","deleteCount","filter"],"mappings":"gWACA,OAASA,QAAT,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,8BAA/B,CACA,MAAO,kBAAP,C,6IAQA,GAAMC,CAAAA,SAA+B,CAAGP,QAAQ,CAAC,cAA+B,IAA5BQ,CAAAA,UAA4B,MAA5BA,UAA4B,CAAhBC,SAAgB,MAAhBA,SAAgB,CAC/E,GAAQC,CAAAA,SAAR,CAAgCN,SAAhC,CAAQM,SAAR,CAAmBC,QAAnB,CAAgCP,SAAhC,CAAmBO,QAAnB,CACA,0BAAqDH,UAArD,CAAQI,SAAR,CAAqBC,SAArB,uBAAqBA,SAArB,CAAgCC,cAAhC,uBAAgCA,cAAhC,CAGA,cAAwCX,QAAQ,CAAC,KAAD,CAAhD,wCAAOY,YAAP,eAAqBC,eAArB,eAEAd,SAAS,CAAC,UAAM,CAEfc,eAAe,CAAC,KAAD,CAAf,CACAN,SAAS,CAACO,OAAV,CAAkB,SAAAC,CAAC,CAAI,CACtB,GAAIA,CAAC,CAACC,QAAF,CAAWC,EAAX,GAAkBZ,UAAU,CAACY,EAAjC,CAAqC,CACpCJ,eAAe,CAAC,IAAD,CAAf,CACA,CACD,CAJD,EAKA,CARQ,CAAT,CAaA,GAAMK,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACvBjB,SAAS,CAACkB,YAAV,oBAA2BZ,SAAS,CAACa,MAAV,CAAiB,CAAEC,KAAK,CAAE,CAAT,CAAYL,QAAQ,CAAEX,UAAtB,CAAjB,CAA3B,GACA,CAFD,CAIA,GAAMiB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAE5B,GAAIC,CAAAA,WAAJ,CAEAtB,SAAS,CAACkB,YAAV,oBACIZ,SAAS,CAACiB,MAAV,CAAiB,SAACT,CAAD,CAAO,CAC1B,GAAIA,CAAC,CAACC,QAAF,CAAWC,EAAX,GAAkBZ,UAAU,CAACY,EAAjC,CAAqCM,WAAW,CAAGR,CAAC,CAACM,KAAhB,CACrC,MAAON,CAAAA,CAAC,CAACC,QAAF,CAAWC,EAAX,GAAkBZ,UAAU,CAACY,EAApC,CACA,CAHE,CADJ,GAMA,CAVD,CAeA,mBACC,yBACEL,YAAY,cACZ,eAAQ,SAAS,CAAC,iCAAlB,CAAoD,OAAO,CAAEU,cAA7D,UACEhB,SAAS,cAAG,KAAC,kBAAD,IAAH,CAA4B,oBADvC,EADY,cAKZ,gBAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAEY,SAAzC,WACE,CAACZ,SAAD,EAAc,WADhB,kBAC6B,KAAC,QAAD,IAD7B,GANF,EADD,CAaA,CApD+C,CAAhD,CAsDA,cAAeF,CAAAA,SAAf","sourcesContent":["import { toJS } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport React, { useEffect, useState } from \"react\";\nimport { IItemData } from \"../../../interfaces/IItemData\";\nimport CartState from \"../../../store/CartState\";\nimport CartIcon from \"../../svg/CartIcon\";\nimport RemoveFromCartIcon from \"../../svg/RemoveFromCartIcon\";\nimport \"./ToCartBtn.scss\";\n\n\ninterface IToCartBtn {\n\ttoCartItem: IItemData;\n\tisBtnLite?: boolean;\n}\n\nconst ToCartBtn: React.FC<IToCartBtn> = observer(({ toCartItem, isBtnLite }) => {\n\tconst { cartItems, priceSum } = CartState;\n\tconst { priceInfo: { fullPrice, discountAmount } } = toCartItem;\n\n\n\tconst [isItemInCart, setIsItemInCart] = useState(false)\n\n\tuseEffect(() => {\n\n\t\tsetIsItemInCart(false)\n\t\tcartItems.forEach(i => {\n\t\t\tif (i.itemData.id === toCartItem.id) {\n\t\t\t\tsetIsItemInCart(true)\n\t\t\t}\n\t\t})\n\t})\n\n\n\n\n\tconst addToCart = () => {\n\t\tCartState.setCartItems([...cartItems.concat({ count: 1, itemData: toCartItem })]);\n\t};\n\n\tconst removeFromCart = () => {\n\n\t\tlet deleteCount: number | undefined;\n\n\t\tCartState.setCartItems([\n\t\t\t...cartItems.filter((i) => {\n\t\t\t\tif (i.itemData.id === toCartItem.id) deleteCount = i.count\n\t\t\t\treturn i.itemData.id !== toCartItem.id;\n\t\t\t}),\n\t\t]);\n\t};\n\n\n\n\n\treturn (\n\t\t<>\n\t\t\t{isItemInCart ?\n\t\t\t\t<button className=\"to-cart-btn to-cart-btn--remove\" onClick={removeFromCart}>\n\t\t\t\t\t{isBtnLite ? <RemoveFromCartIcon /> : 'Удалить из корзины'}\n\t\t\t\t</button>\n\t\t\t\t:\n\t\t\t\t<button className=\"to-cart-btn\" onClick={addToCart}>\n\t\t\t\t\t{!isBtnLite && \"В корзину\"} <CartIcon />\n\t\t\t\t</button>}\n\t\t</>\n\t);\n\n});\n\nexport default ToCartBtn;\n"]},"metadata":{},"sourceType":"module"}