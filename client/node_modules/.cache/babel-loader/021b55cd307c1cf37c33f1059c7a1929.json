{"ast":null,"code":"import _slicedToArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{observer}from\"mobx-react-lite\";import React,{useEffect,useRef,useState}from\"react\";import LoginState from\"../../store/LoginState\";import CloseBtn from\"../svg/CloseBtn\";import SubmitBtn from\"../buttons/SubmitBtn/SubmitBtn\";import{ScrollLockOnFixed}from\"../../Utils/ScrollLockOnFixed\";import\"./LoginPopup.scss\";import{addUserToDB}from\"../../Utils/addUserToDB\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPopup=observer(function(_ref){var headerRef=_ref.headerRef;var userName=LoginState.userName,userPassword=LoginState.userPassword,isPopupShown=LoginState.isPopupShown;var overlayRef=useRef(null);var closeBtnRef=useRef(null);var loginRef=useRef(null);var loginPopupRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPassShown=_useState2[0],setIsPassShown=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),loginValue=_useState4[0],setLoginValue=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),passwordValue=_useState6[0],setPasswordValue=_useState6[1];useEffect(function(){if(headerRef){ScrollLockOnFixed(\"disabled\",headerRef);}return function(){ScrollLockOnFixed(\"enabled\",headerRef);};},[]);useEffect(function(){if(isPopupShown){loginRef.current.focus();}},[isPopupShown]);var closePopup=function closePopup(e){if(overlayRef.current===e.target||closeBtnRef.current===e.target){LoginState.setIsPopupShown(!isPopupShown);}};var inputHandleChange=function inputHandleChange(e){if(e.currentTarget.id===\"login-field\"){setLoginValue(e.currentTarget.value);}if(e.currentTarget.id===\"password-field\"){setPasswordValue(e.currentTarget.value);}};var showPassword=function showPassword(){setIsPassShown(!isPassShown);};var userLogIned=function userLogIned(){if(loginValue&&passwordValue){// LoginState.setUserName(loginValue)\n// LoginState.setUserPassword(passwordValue)\n}addUserToDB(loginValue,passwordValue);};var onOverlayClick=function onOverlayClick(e){if(e.target===overlayRef.current){LoginState.setIsPopupShown(!isPopupShown);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-popup\",children:/*#__PURE__*/_jsx(\"div\",{ref:overlayRef,className:\"login-popup__overlay\",onClick:onOverlayClick,children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-popup__form\",ref:loginPopupRef,children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return closePopup(e);},ref:closeBtnRef,type:\"button\",className:\"login-popup__close-btn\",children:/*#__PURE__*/_jsx(CloseBtn,{})}),userName&&userPassword?/*#__PURE__*/_jsx(\"div\",{className:\"login-popup__success\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u044B \\u0432\\u043E\\u0448\\u043B\\u0438 \\u043F\\u043E\\u0434 \\u0438\\u043C\\u0435\\u043D\\u0435\\u043C \",userName]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"login-popup__login-wrap\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login-popup__title\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-popup__fields-wrap\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"login-popup__input-wrap\",htmlFor:\"login-field\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u041B\\u043E\\u0433\\u0438\\u043D:\"}),/*#__PURE__*/_jsx(\"input\",{ref:loginRef,className:\"login-popup__input\",type:\"text\",onChange:function onChange(e){return inputHandleChange(e);},value:loginValue,placeholder:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0440: user123\",id:\"login-field\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"login-popup__input-wrap\",htmlFor:\"password-field\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login-popup__input\",type:isPassShown?\"text\":\"password\",onChange:function onChange(e){return inputHandleChange(e);},value:passwordValue,placeholder:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0440: Password1234\",id:\"password-field\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"login-popup__show-pass-wrap\",htmlFor:\"show-password\",children:[/*#__PURE__*/_jsx(\"input\",{onClick:showPassword,type:\"checkbox\",id:\"show-password\",checked:isPassShown,onChange:function onChange(){return setIsPassShown(!isPassShown);}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-popup__btns-wrap\",children:/*#__PURE__*/_jsx(SubmitBtn,{userLogIned:userLogIned})})]})]})})});});export default LoginPopup;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/LoginPopup/LoginPopup.tsx"],"names":["observer","React","useEffect","useRef","useState","LoginState","CloseBtn","SubmitBtn","ScrollLockOnFixed","addUserToDB","LoginPopup","headerRef","userName","userPassword","isPopupShown","overlayRef","closeBtnRef","loginRef","loginPopupRef","isPassShown","setIsPassShown","loginValue","setLoginValue","passwordValue","setPasswordValue","current","focus","closePopup","e","target","setIsPopupShown","inputHandleChange","currentTarget","id","value","showPassword","userLogIned","onOverlayClick"],"mappings":"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","sourcesContent":["import { observer } from \"mobx-react-lite\";\r\nimport React, { RefObject, useEffect, useRef, useState } from \"react\";\r\nimport LoginState from \"../../store/LoginState\";\r\nimport CloseBtn from \"../svg/CloseBtn\";\r\nimport SubmitBtn from \"../buttons/SubmitBtn/SubmitBtn\";\r\nimport { ScrollLockOnFixed } from \"../../Utils/ScrollLockOnFixed\";\r\nimport \"./LoginPopup.scss\";\r\nimport { addUserToDB } from \"../../Utils/addUserToDB\";\r\n\r\n\r\nconst LoginPopup = observer(({ headerRef }: { headerRef: RefObject<HTMLDivElement> }) => {\r\n\r\n    const { userName, userPassword, isPopupShown } = LoginState\r\n\r\n    const overlayRef = useRef(null);\r\n    const closeBtnRef = useRef(null);\r\n    const loginRef: any = useRef(null);\r\n    const loginPopupRef = useRef(null);\r\n\r\n    const [isPassShown, setIsPassShown] = useState(false)\r\n    const [loginValue, setLoginValue] = useState('')\r\n    const [passwordValue, setPasswordValue] = useState('')\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (headerRef) {\r\n\r\n            ScrollLockOnFixed(\"disabled\", headerRef)\r\n        }\r\n\r\n        return () => {\r\n            ScrollLockOnFixed(\"enabled\", headerRef)\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        if (isPopupShown) {\r\n            loginRef.current.focus();\r\n        }\r\n\r\n    }, [isPopupShown]);\r\n\r\n    const closePopup = (e: any) => {\r\n        if (overlayRef.current === e.target || closeBtnRef.current === e.target) {\r\n            LoginState.setIsPopupShown(!isPopupShown);\r\n        }\r\n    };\r\n\r\n    const inputHandleChange = (e: React.FormEvent<HTMLInputElement>) => {\r\n        if (e.currentTarget.id === \"login-field\") {\r\n            setLoginValue(e.currentTarget.value);\r\n        }\r\n        if (e.currentTarget.id === \"password-field\") {\r\n            setPasswordValue(e.currentTarget.value);\r\n        }\r\n    };\r\n\r\n    const showPassword = () => {\r\n        setIsPassShown(!isPassShown);\r\n    };\r\n\r\n    const userLogIned = () => {\r\n        if (loginValue && passwordValue) {\r\n            // LoginState.setUserName(loginValue)\r\n            // LoginState.setUserPassword(passwordValue)\r\n        }\r\n        addUserToDB(loginValue, passwordValue)\r\n    };\r\n\r\n    const onOverlayClick = (e: any) => {\r\n        if (e.target === overlayRef.current) {\r\n            LoginState.setIsPopupShown(!isPopupShown)\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"login-popup\" >\r\n            <div ref={overlayRef} className=\"login-popup__overlay\"\r\n                onClick={onOverlayClick}\r\n            >\r\n                <form className=\"login-popup__form\" ref={loginPopupRef}>\r\n                    <button\r\n                        onClick={(e) => closePopup(e)}\r\n                        ref={closeBtnRef}\r\n                        type=\"button\"\r\n                        className=\"login-popup__close-btn\"\r\n                    >\r\n                        <CloseBtn />\r\n                    </button>\r\n                    {userName && userPassword ? (\r\n                        <div className=\"login-popup__success\">\r\n                            <p>Вы вошли под именем {userName}</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"login-popup__login-wrap\">\r\n                            <h3 className=\"login-popup__title\">Вход</h3>\r\n                            <div className=\"login-popup__fields-wrap\">\r\n                                <label className=\"login-popup__input-wrap\" htmlFor=\"login-field\">\r\n                                    <b>Логин:</b>\r\n                                    <input\r\n                                        ref={loginRef}\r\n                                        className=\"login-popup__input\"\r\n                                        type=\"text\"\r\n                                        onChange={(e) => inputHandleChange(e)}\r\n                                        value={loginValue}\r\n                                        placeholder=\"Пример: user123\"\r\n                                        id=\"login-field\"\r\n                                    />\r\n                                </label>\r\n                                <label className=\"login-popup__input-wrap\" htmlFor=\"password-field\">\r\n                                    <b>Пароль:</b>\r\n                                    <input\r\n                                        className=\"login-popup__input\"\r\n                                        type={isPassShown ? \"text\" : \"password\"}\r\n                                        onChange={(e) => inputHandleChange(e)}\r\n                                        value={passwordValue}\r\n                                        placeholder=\"Пример: Password1234\"\r\n                                        id=\"password-field\"\r\n                                    />\r\n                                    <label className=\"login-popup__show-pass-wrap\" htmlFor=\"show-password\">\r\n                                        <input\r\n                                            onClick={showPassword}\r\n                                            type=\"checkbox\"\r\n                                            id=\"show-password\"\r\n                                            checked={isPassShown}\r\n                                            onChange={() => setIsPassShown(!isPassShown)}\r\n                                        />\r\n                                        <span>Показать пароль</span>\r\n                                    </label>\r\n                                </label>\r\n                            </div>\r\n                            <div className=\"login-popup__btns-wrap\">\r\n                                <SubmitBtn userLogIned={userLogIned} />\r\n                                {/* <a className=\"login-popup__registration-btn\" type=\"button\">\r\n                                    Зарегистрироваться\r\n                                </a> */}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default LoginPopup"]},"metadata":{},"sourceType":"module"}