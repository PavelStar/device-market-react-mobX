{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import{observer}from\"mobx-react-lite\";import CheckboxCategory from\"./CheckboxCategory/CheckboxCategory\";import CheckboxBrand from\"./CheckboxBrand/CheckboxBrand\";import FiltersSettingsState from\"../../store/FiltersSettingsState\";import ResponseDataState from\"../../store/ResponseDataState\";import PriceRange from\"../PriceRange/PriceRange\";import Switcher from\"../Switcher/Switcher\";import ClearFiltersBtn from\"../buttons/ResetFiltersBtn/ResetFiltersBtn\";import PageWidthState from\"../../store/PageWidthState\";import{ScrollLockOnFixed}from\"../../Utils/ScrollLockOnFixed\";import CloseBtn from\"../svg/CloseBtn\";import'./FiltersPanel.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FiltersPanel=observer(function(_ref){var itemsToShowCount=_ref.itemsToShowCount;var isMobile=PageWidthState.isMobile;var isAvailable=FiltersSettingsState.isAvailable,isDiscount=FiltersSettingsState.isDiscount,itemsFound=FiltersSettingsState.itemsFound;var responseData=ResponseDataState.responseData;var filtersRef=useRef(null);var showBtnRef=useRef(null);useEffect(function(){if(filtersRef.current&&isMobile){console.log('filters panel mount');ScrollLockOnFixed(\"disabled\",filtersRef);console.log(filtersRef.current);}return function(){ScrollLockOnFixed(\"enabled\",filtersRef);};},[]);var showFilters=function showFilters(){console.log(filtersRef.current);FiltersSettingsState.setIsFiltersShown(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"filters-panel\",ref:filtersRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"filters-panel__filter-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-panel__reset-wrap\",children:[/*#__PURE__*/_jsx(ClearFiltersBtn,{}),/*#__PURE__*/_jsx(\"button\",{onClick:showFilters,className:\"filters-panel__close-btn\",children:/*#__PURE__*/_jsx(CloseBtn,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-panel__section-wrap\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"filters-panel__category-sorting-list\",children:responseData===null||responseData===void 0?void 0:responseData.categories.map(function(category){return/*#__PURE__*/_jsx(\"li\",{className:\"filters-panel__category-sorting-item\",children:/*#__PURE__*/_jsx(CheckboxCategory,{category:category})});})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-panel__section-wrap\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0411\\u0440\\u0435\\u043D\\u0434:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"filters-panel__brand-sorting-list\",children:responseData===null||responseData===void 0?void 0:responseData.brands.map(function(brand){return/*#__PURE__*/_jsx(\"li\",{className:\"filters-panel__brand-sorting-item\",children:/*#__PURE__*/_jsx(CheckboxBrand,{brand:brand})});})})]}),/*#__PURE__*/_jsx(PriceRange,{}),/*#__PURE__*/_jsxs(\"ul\",{className:\"filters-panel__switch-list\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"filters-panel__switch-item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"filters-panel__switch-text\",children:\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"}),/*#__PURE__*/_jsx(Switcher,{name:\"isAvailableSwitch\",state:isAvailable})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"filters-panel__switch-item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"filters-panel__switch-text\",children:\"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430\"}),/*#__PURE__*/_jsx(Switcher,{name:\"isDiscountSwitch\",state:isDiscount})]})]}),isMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"filters-panel__results-btn-wrap\",ref:showBtnRef,children:/*#__PURE__*/_jsxs(\"button\",{className:\"filters-panel__results-btn\",onClick:showFilters,children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C (\",itemsFound,\") \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"]})})]})});});export default FiltersPanel;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/FiltersPanel/FiltersPanel.tsx"],"names":["React","useEffect","useRef","observer","CheckboxCategory","CheckboxBrand","FiltersSettingsState","ResponseDataState","PriceRange","Switcher","ClearFiltersBtn","PageWidthState","ScrollLockOnFixed","CloseBtn","FiltersPanel","itemsToShowCount","isMobile","isAvailable","isDiscount","itemsFound","responseData","filtersRef","showBtnRef","current","console","log","showFilters","setIsFiltersShown","categories","map","category","brands","brand"],"mappings":"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","sourcesContent":["import React, { ReactFragment, useEffect, useRef, useState } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { ICategory } from \"../../interfaces/ICategory\";\nimport CheckboxCategory from \"./CheckboxCategory/CheckboxCategory\";\nimport CheckboxBrand from \"./CheckboxBrand/CheckboxBrand\";\nimport FiltersSettingsState from \"../../store/FiltersSettingsState\";\nimport ResponseDataState from \"../../store/ResponseDataState\";\nimport PriceRange from \"../PriceRange/PriceRange\";\nimport Switcher from \"../Switcher/Switcher\";\nimport ClearFiltersBtn from \"../buttons/ResetFiltersBtn/ResetFiltersBtn\";\nimport PageWidthState from \"../../store/PageWidthState\";\nimport { ScrollLockOnFixed } from \"../../Utils/ScrollLockOnFixed\";\nimport CloseBtn from \"../svg/CloseBtn\";\nimport { SetFilterSettings } from \"../../Utils/SetFilterSettings\";\nimport './FiltersPanel.scss'\n\n\ninterface IFiltersPanel {\n\titemsToShowCount?: number;\n}\n\n\nconst FiltersPanel: React.FC<IFiltersPanel> = observer(({ itemsToShowCount }) => {\n\n\n\tconst { isMobile } = PageWidthState;\n\tconst { isAvailable, isDiscount, itemsFound } = FiltersSettingsState\n\tconst { responseData } = ResponseDataState\n\n\tconst filtersRef = useRef(null)\n\tconst showBtnRef = useRef(null)\n\n\n\n\tuseEffect(() => {\n\t\tif (filtersRef.current && isMobile) {\n\t\t\tconsole.log('filters panel mount')\n\t\t\tScrollLockOnFixed(\"disabled\", filtersRef)\n\t\t\tconsole.log(filtersRef.current)\n\t\t}\n\n\t\treturn () => {\n\n\t\t\tScrollLockOnFixed(\"enabled\", filtersRef)\n\n\t\t}\n\t}, [])\n\n\n\n\n\tconst showFilters = () => {\n\t\tconsole.log(filtersRef.current)\n\t\tFiltersSettingsState.setIsFiltersShown(false)\n\t};\n\n\n\n\n\treturn (\n\t\t<div className=\"filters-panel\" ref={filtersRef}>\n\n\t\t\t<div className=\"filters-panel__filter-wrap\" >\n\t\t\t\t{/* <h2 className=\"filters-panel__title\">Фильтры</h2> */}\n\t\t\t\t<div className=\"filters-panel__reset-wrap\">\n\n\t\t\t\t\t<ClearFiltersBtn />\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={showFilters}\n\t\t\t\t\t\tclassName=\"filters-panel__close-btn\">\n\t\t\t\t\t\t<CloseBtn />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"filters-panel__section-wrap\">\n\t\t\t\t\t<h3>Категория:</h3>\n\t\t\t\t\t<ul className=\"filters-panel__category-sorting-list\">\n\t\t\t\t\t\t{responseData?.categories.map((category: ICategory) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li className=\"filters-panel__category-sorting-item\">\n\t\t\t\t\t\t\t\t\t<CheckboxCategory category={category} />\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"filters-panel__section-wrap\">\n\t\t\t\t\t<h3>Бренд:</h3>\n\t\t\t\t\t<ul className=\"filters-panel__brand-sorting-list\">\n\t\t\t\t\t\t{responseData?.brands.map((brand: string) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li className=\"filters-panel__brand-sorting-item\">\n\t\t\t\t\t\t\t\t\t<CheckboxBrand brand={brand} />\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<PriceRange />\n\t\t\t\t<ul className=\"filters-panel__switch-list\">\n\t\t\t\t\t<li className=\"filters-panel__switch-item\">\n\t\t\t\t\t\t<p className=\"filters-panel__switch-text\">В наличии</p>\n\t\t\t\t\t\t<Switcher name=\"isAvailableSwitch\" state={isAvailable} />\n\t\t\t\t\t</li>\n\t\t\t\t\t<li className=\"filters-panel__switch-item\">\n\t\t\t\t\t\t<p className=\"filters-panel__switch-text\">Скидка</p>\n\t\t\t\t\t\t<Switcher name=\"isDiscountSwitch\" state={isDiscount} />\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t{isMobile &&\n\t\t\t\t\t<div className=\"filters-panel__results-btn-wrap\" ref={showBtnRef}>\n\t\t\t\t\t\t<button className=\"filters-panel__results-btn\"\n\t\t\t\t\t\t\tonClick={showFilters}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tПоказать ({itemsFound}) товаров\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default FiltersPanel;\n"]},"metadata":{},"sourceType":"module"}