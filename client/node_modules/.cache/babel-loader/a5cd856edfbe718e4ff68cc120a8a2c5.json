{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{observer}from\"mobx-react-lite\";import{useEffect,useState}from\"react\";import CartState from\"../../../store/CartState\";import CartIcon from\"../../svg/CartIcon\";import RemoveFromCartIcon from\"../../svg/RemoveFromCartIcon\";import\"./ToCartBtn.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ToCartBtn=observer(function(_ref){var item=_ref.item,isBtnLite=_ref.isBtnLite;var cartItems=CartState.cartItems,priceSum=CartState.priceSum;var _item$priceInfo=item.priceInfo,fullPrice=_item$priceInfo.fullPrice,discountAmount=_item$priceInfo.discountAmount;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isItemInCart=_useState2[0],setIsItemInCart=_useState2[1];useEffect(function(){setIsItemInCart(false);cartItems.forEach(function(i){if(i.id===item.id){console.log(true);setIsItemInCart(true);}});});var addToCart=function addToCart(){CartState.setCartItems(_toConsumableArray(cartItems.concat(item)));CartState.setPriceSum(priceSum+fullPrice-discountAmount);};var removeFromCart=function removeFromCart(){CartState.setCartItems(_toConsumableArray(cartItems.filter(function(i){return i.id!==item.id;})));CartState.setPriceSum(priceSum-(fullPrice-discountAmount));};return/*#__PURE__*/_jsx(_Fragment,{children:isItemInCart?/*#__PURE__*/_jsx(\"button\",{className:\"to-cart-btn to-cart-btn--remove\",onClick:removeFromCart,children:isBtnLite?/*#__PURE__*/_jsx(RemoveFromCartIcon,{}):'Удалить из корзины'}):/*#__PURE__*/_jsxs(\"button\",{className:\"to-cart-btn\",onClick:addToCart,children:[!isBtnLite&&\"В корзину\",\" \",/*#__PURE__*/_jsx(CartIcon,{})]})});});export default ToCartBtn;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/buttons/ToCartBtn/ToCartBtn.tsx"],"names":["observer","useEffect","useState","CartState","CartIcon","RemoveFromCartIcon","ToCartBtn","item","isBtnLite","cartItems","priceSum","priceInfo","fullPrice","discountAmount","isItemInCart","setIsItemInCart","forEach","i","id","console","log","addToCart","setCartItems","concat","setPriceSum","removeFromCart","filter"],"mappings":"gWACA,OAASA,QAAT,KAAyB,iBAAzB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,CAEA,MAAOC,CAAAA,kBAAP,KAA+B,8BAA/B,CACA,MAAO,kBAAP,C,6IAIA,GAAMC,CAAAA,SAAS,CAAGN,QAAQ,CAAC,cAAmE,IAAhEO,CAAAA,IAAgE,MAAhEA,IAAgE,CAA1DC,SAA0D,MAA1DA,SAA0D,CAC7F,GAAQC,CAAAA,SAAR,CAAgCN,SAAhC,CAAQM,SAAR,CAAmBC,QAAnB,CAAgCP,SAAhC,CAAmBO,QAAnB,CACA,oBAAqDH,IAArD,CAAQI,SAAR,CAAqBC,SAArB,iBAAqBA,SAArB,CAAgCC,cAAhC,iBAAgCA,cAAhC,CAGA,cAAwCX,QAAQ,CAAC,KAAD,CAAhD,wCAAOY,YAAP,eAAqBC,eAArB,eAEAd,SAAS,CAAC,UAAM,CAEfc,eAAe,CAAC,KAAD,CAAf,CACAN,SAAS,CAACO,OAAV,CAAkB,SAAAC,CAAC,CAAI,CACtB,GAAIA,CAAC,CAACC,EAAF,GAASX,IAAI,CAACW,EAAlB,CAAsB,CACrBC,OAAO,CAACC,GAAR,CAAY,IAAZ,EACAL,eAAe,CAAC,IAAD,CAAf,CACA,CACD,CALD,EAOA,CAVQ,CAAT,CAaA,GAAMM,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACvBlB,SAAS,CAACmB,YAAV,oBAA2Bb,SAAS,CAACc,MAAV,CAAiBhB,IAAjB,CAA3B,GACAJ,SAAS,CAACqB,WAAV,CAAsBd,QAAQ,CAAGE,SAAX,CAAuBC,cAA7C,EACA,CAHD,CAKA,GAAMY,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC5BtB,SAAS,CAACmB,YAAV,oBACIb,SAAS,CAACiB,MAAV,CAAiB,SAACT,CAAD,CAAO,CAC1B,MAAOA,CAAAA,CAAC,CAACC,EAAF,GAASX,IAAI,CAACW,EAArB,CACA,CAFE,CADJ,GAKAf,SAAS,CAACqB,WAAV,CAAsBd,QAAQ,EAAIE,SAAS,CAAGC,cAAhB,CAA9B,EACA,CAPD,CAUA,mBACC,yBACEC,YAAY,cACZ,eAAQ,SAAS,CAAC,iCAAlB,CAAoD,OAAO,CAAEW,cAA7D,UACEjB,SAAS,cAAG,KAAC,kBAAD,IAAH,CAA4B,oBADvC,EADY,cAOZ,gBAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAEa,SAAzC,WACE,CAACb,SAAD,EAAc,WADhB,kBAC6B,KAAC,QAAD,IAD7B,GARF,EADD,CAiBA,CApDyB,CAA1B,CAsDA,cAAeF,CAAAA,SAAf","sourcesContent":["import { toJS } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport { useEffect, useState } from \"react\";\nimport { IItemData } from \"../../../interfaces/IItemData\";\nimport CartState from \"../../../store/CartState\";\nimport CartIcon from \"../../svg/CartIcon\";\nimport CloseBtn from \"../../svg/CloseBtn\";\nimport RemoveFromCartIcon from \"../../svg/RemoveFromCartIcon\";\nimport \"./ToCartBtn.scss\";\n\n\n\nconst ToCartBtn = observer(({ item, isBtnLite }: { item: IItemData, isBtnLite?: boolean }) => {\n\tconst { cartItems, priceSum } = CartState;\n\tconst { priceInfo: { fullPrice, discountAmount } } = item;\n\n\n\tconst [isItemInCart, setIsItemInCart] = useState(false)\n\n\tuseEffect(() => {\n\n\t\tsetIsItemInCart(false)\n\t\tcartItems.forEach(i => {\n\t\t\tif (i.id === item.id) {\n\t\t\t\tconsole.log(true)\n\t\t\t\tsetIsItemInCart(true)\n\t\t\t}\n\t\t})\n\n\t})\n\n\n\tconst addToCart = () => {\n\t\tCartState.setCartItems([...cartItems.concat(item)]);\n\t\tCartState.setPriceSum(priceSum + fullPrice - discountAmount)\n\t};\n\n\tconst removeFromCart = () => {\n\t\tCartState.setCartItems([\n\t\t\t...cartItems.filter((i) => {\n\t\t\t\treturn i.id !== item.id;\n\t\t\t}),\n\t\t]);\n\t\tCartState.setPriceSum(priceSum - (fullPrice - discountAmount))\n\t};\n\n\n\treturn (\n\t\t<>\n\t\t\t{isItemInCart ?\n\t\t\t\t<button className=\"to-cart-btn to-cart-btn--remove\" onClick={removeFromCart}>\n\t\t\t\t\t{isBtnLite ? <RemoveFromCartIcon /> : 'Удалить из корзины'}\n\n\t\t\t\t</button>\n\n\t\t\t\t:\n\t\t\t\t<button className=\"to-cart-btn\" onClick={addToCart}>\n\t\t\t\t\t{!isBtnLite && \"В корзину\"} <CartIcon />\n\t\t\t\t</button>}\n\n\n\t\t</>\n\t);\n\n});\n\nexport default ToCartBtn;\n"]},"metadata":{},"sourceType":"module"}