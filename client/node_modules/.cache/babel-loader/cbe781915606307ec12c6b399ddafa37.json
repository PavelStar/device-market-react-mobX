{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pavel\\\\Desktop\\\\js\\\\device-market-master\\\\client\\\\src\\\\components\\\\buttons\\\\ToCartBtn\\\\ToCartBtn.tsx\",\n    _s = $RefreshSig$();\n\nimport { observer } from \"mobx-react-lite\";\nimport React, { useEffect, useState } from \"react\";\nimport CartState from \"../../../store/CartState\";\nimport CartIcon from \"../../svg/CartIcon\";\nimport RemoveFromCartIcon from \"../../svg/RemoveFromCartIcon\";\nimport \"./ToCartBtn.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ToCartBtn = observer(_c = _s(_ref => {\n  _s();\n\n  let {\n    item,\n    isBtnLite\n  } = _ref;\n  const {\n    cartItems,\n    priceSum\n  } = CartState;\n  const {\n    priceInfo: {\n      fullPrice,\n      discountAmount\n    }\n  } = item;\n  const [isItemInCart, setIsItemInCart] = useState(false);\n  useEffect(() => {\n    setIsItemInCart(false);\n    cartItems.forEach(i => {\n      if (i.id === item.id) {\n        setIsItemInCart(true);\n      }\n    });\n  });\n\n  const addToCart = () => {\n    CartState.setCartItems([...cartItems.concat(item)]);\n    CartState.setPriceSum(priceSum + (fullPrice - discountAmount));\n  };\n\n  const removeFromCart = () => {\n    CartState.setCartItems([...cartItems.filter(i => {\n      return i.id !== item.id;\n    })]);\n    CartState.setPriceSum(priceSum - (fullPrice - discountAmount));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isItemInCart ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"to-cart-btn to-cart-btn--remove\",\n      onClick: removeFromCart,\n      children: isBtnLite ? /*#__PURE__*/_jsxDEV(RemoveFromCartIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 19\n      }, this) : 'Удалить из корзины'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"to-cart-btn\",\n      onClick: addToCart,\n      children: [!isBtnLite && \"В корзину\", \" \", /*#__PURE__*/_jsxDEV(CartIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}, \"J8xoz0ZrN4JHueGF4M7N1sO5FEk=\"));\n_c2 = ToCartBtn;\nexport default ToCartBtn;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ToCartBtn$observer\");\n$RefreshReg$(_c2, \"ToCartBtn\");","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/buttons/ToCartBtn/ToCartBtn.tsx"],"names":["observer","React","useEffect","useState","CartState","CartIcon","RemoveFromCartIcon","ToCartBtn","item","isBtnLite","cartItems","priceSum","priceInfo","fullPrice","discountAmount","isItemInCart","setIsItemInCart","forEach","i","id","addToCart","setCartItems","concat","setPriceSum","removeFromCart","filter"],"mappings":";;;AACA,SAASA,QAAT,QAAyB,iBAAzB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AAEA,OAAOC,kBAAP,MAA+B,8BAA/B;AACA,OAAO,kBAAP;;;AAQA,MAAMC,SAA+B,GAAGP,QAAQ,SAAC,QAAyB;AAAA;;AAAA,MAAxB;AAAEQ,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAwB;AACzE,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAA0BP,SAAhC;AACA,QAAM;AAAEQ,IAAAA,SAAS,EAAE;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb;AAAb,MAA+CN,IAArD;AAGA,QAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,KAAD,CAAhD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AAEfc,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAN,IAAAA,SAAS,CAACO,OAAV,CAAkBC,CAAC,IAAI;AACtB,UAAIA,CAAC,CAACC,EAAF,KAASX,IAAI,CAACW,EAAlB,EAAsB;AACrBH,QAAAA,eAAe,CAAC,IAAD,CAAf;AACA;AACD,KAJD;AAKA,GARQ,CAAT;;AAWA,QAAMI,SAAS,GAAG,MAAM;AACvBhB,IAAAA,SAAS,CAACiB,YAAV,CAAuB,CAAC,GAAGX,SAAS,CAACY,MAAV,CAAiBd,IAAjB,CAAJ,CAAvB;AACAJ,IAAAA,SAAS,CAACmB,WAAV,CAAsBZ,QAAQ,IAAIE,SAAS,GAAGC,cAAhB,CAA9B;AACA,GAHD;;AAKA,QAAMU,cAAc,GAAG,MAAM;AAC5BpB,IAAAA,SAAS,CAACiB,YAAV,CAAuB,CACtB,GAAGX,SAAS,CAACe,MAAV,CAAkBP,CAAD,IAAO;AAC1B,aAAOA,CAAC,CAACC,EAAF,KAASX,IAAI,CAACW,EAArB;AACA,KAFE,CADmB,CAAvB;AAKAf,IAAAA,SAAS,CAACmB,WAAV,CAAsBZ,QAAQ,IAAIE,SAAS,GAAGC,cAAhB,CAA9B;AACA,GAPD;;AAUA,sBACC;AAAA,cACEC,YAAY,gBACZ;AAAQ,MAAA,SAAS,EAAC,iCAAlB;AAAoD,MAAA,OAAO,EAAES,cAA7D;AAAA,gBACEf,SAAS,gBAAG,QAAC,kBAAD;AAAA;AAAA;AAAA;AAAA,cAAH,GAA4B;AADvC;AAAA;AAAA;AAAA;AAAA,YADY,gBAOZ;AAAQ,MAAA,SAAS,EAAC,aAAlB;AAAgC,MAAA,OAAO,EAAEW,SAAzC;AAAA,iBACE,CAACX,SAAD,IAAc,WADhB,oBAC6B,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cAD7B;AAAA;AAAA;AAAA;AAAA;AAAA;AARF,mBADD;AAiBA,CAlD+C,kCAAhD;MAAMF,S;AAoDN,eAAeA,SAAf","sourcesContent":["import { toJS } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport React, { useEffect, useState } from \"react\";\nimport { IItemData } from \"../../../interfaces/IItemData\";\nimport CartState from \"../../../store/CartState\";\nimport CartIcon from \"../../svg/CartIcon\";\nimport CloseBtn from \"../../svg/CloseBtn\";\nimport RemoveFromCartIcon from \"../../svg/RemoveFromCartIcon\";\nimport \"./ToCartBtn.scss\";\n\n\ninterface IToCartBtn {\n\titem: IItemData;\n\tisBtnLite?: boolean;\n}\n\nconst ToCartBtn: React.FC<IToCartBtn> = observer(({ item, isBtnLite }) => {\n\tconst { cartItems, priceSum } = CartState;\n\tconst { priceInfo: { fullPrice, discountAmount } } = item;\n\n\n\tconst [isItemInCart, setIsItemInCart] = useState(false)\n\n\tuseEffect(() => {\n\n\t\tsetIsItemInCart(false)\n\t\tcartItems.forEach(i => {\n\t\t\tif (i.id === item.id) {\n\t\t\t\tsetIsItemInCart(true)\n\t\t\t}\n\t\t})\n\t})\n\n\n\tconst addToCart = () => {\n\t\tCartState.setCartItems([...cartItems.concat(item)]);\n\t\tCartState.setPriceSum(priceSum + (fullPrice - discountAmount))\n\t};\n\n\tconst removeFromCart = () => {\n\t\tCartState.setCartItems([\n\t\t\t...cartItems.filter((i) => {\n\t\t\t\treturn i.id !== item.id;\n\t\t\t}),\n\t\t]);\n\t\tCartState.setPriceSum(priceSum - (fullPrice - discountAmount))\n\t};\n\n\n\treturn (\n\t\t<>\n\t\t\t{isItemInCart ?\n\t\t\t\t<button className=\"to-cart-btn to-cart-btn--remove\" onClick={removeFromCart}>\n\t\t\t\t\t{isBtnLite ? <RemoveFromCartIcon /> : 'Удалить из корзины'}\n\n\t\t\t\t</button>\n\n\t\t\t\t:\n\t\t\t\t<button className=\"to-cart-btn\" onClick={addToCart}>\n\t\t\t\t\t{!isBtnLite && \"В корзину\"} <CartIcon />\n\t\t\t\t</button>}\n\n\n\t\t</>\n\t);\n\n});\n\nexport default ToCartBtn;\n"]},"metadata":{},"sourceType":"module"}