{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Pavel/Desktop/js/device-market-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{observer}from\"mobx-react-lite\";import{Link,useNavigate}from\"react-router-dom\";import CartState from\"../../store/CartState\";import OrdersPageState from\"../../store/OrdersPageState\";import EmptyCart from\"../../components/svg/EmptyCart\";import CatalogLink from\"../../components/buttons/CatalogLink/CatalogLink\";import CartItem from\"../../components/Cart/CartItem/CartItem\";import\"./Cart.scss\";import StatusEmptyBlock from\"../StatusEmptyBlock/StatusEmptyBlock\";import BackBtn from\"../buttons/BackBtn/BackBtn\";import ClearCartBtn from\"../buttons/ClearCartBtn/ClearCartBtn\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=observer(function(){var cartItems=CartState.cartItems,priceSum=CartState.priceSum;var itemsFromCart=OrdersPageState.itemsFromCart;var navigate=useNavigate();var goBack=function goBack(){return navigate(-1);};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOrderSuccess=_useState2[0],setIsOrderSuccess=_useState2[1];var makeOrder=function makeOrder(){OrdersPageState.setItemsFromCart(_toConsumableArray(itemsFromCart.concat([CartState.cartItems])));OrdersPageState.setOrderSum(priceSum);setIsOrderSuccess(true);CartState.setCartItems([]);CartState.setPriceSum(0);OrdersPageState.setOrderDate(new Date().toLocaleDateString());window.scrollTo(0,0);};return/*#__PURE__*/_jsx(\"div\",{className:\"cart\",children:isOrderSuccess?/*#__PURE__*/_jsxs(\"div\",{className:\"order-success\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"order-success__title\",children:[\"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u2116\",OrdersPageState.itemsFromCart.length,\" \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-success__description\",children:[\"\\u041E\\u0442\\u0441\\u043B\\u0435\\u0434\\u0438\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441 \\u043C\\u043E\\u0436\\u043D\\u043E \\u0432\",/*#__PURE__*/_jsx(Link,{to:\"/orders-page\",children:/*#__PURE__*/_jsx(\"span\",{className:\"order-success__link\",children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-success__btns-wrap\",children:[/*#__PURE__*/_jsx(Link,{to:\"/orders-page\",children:/*#__PURE__*/_jsx(\"button\",{className:\"order-success__to-order-btn stroked-btn\",children:\"\\u041A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443\"})}),/*#__PURE__*/_jsx(CatalogLink,{btnName:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"cart__inner\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"cart__title section-title\",children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart__btns-wrap\",children:[/*#__PURE__*/_jsx(BackBtn,{btnName:\"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430\\u0437\\u0430\\u0434\"}),cartItems.length>0?/*#__PURE__*/_jsx(ClearCartBtn,{}):/*#__PURE__*/_jsx(CatalogLink,{btnName:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u0432 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"cart__list\",children:cartItems.length===0?/*#__PURE__*/_jsx(StatusEmptyBlock,{title:\"В корзину ничего не добавлено\",image:/*#__PURE__*/_jsx(EmptyCart,{})}):cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(CartItem,{item:item})});})}),cartItems.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart__price-block total-price-block\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"total-price-block__items-count\",children:\"\\u0418\\u0442\\u043E\\u0433\\u043E: \"}),/*#__PURE__*/_jsxs(\"b\",{className:\"total-price-block__price\",children:[CartState.priceSum,\" \\u0440\\u0443\\u0431.\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:makeOrder,className:\"cart__checkout-btn\",children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C\"})]}):null]})});});export default Cart;","map":{"version":3,"sources":["C:/Users/Pavel/Desktop/js/device-market-master/client/src/components/Cart/Cart.tsx"],"names":["useState","observer","Link","useNavigate","CartState","OrdersPageState","EmptyCart","CatalogLink","CartItem","StatusEmptyBlock","BackBtn","ClearCartBtn","Cart","cartItems","priceSum","itemsFromCart","navigate","goBack","isOrderSuccess","setIsOrderSuccess","makeOrder","setItemsFromCart","concat","setOrderSum","setCartItems","setPriceSum","setOrderDate","Date","toLocaleDateString","window","scrollTo","length","map","item"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { IItemData } from \"../../interfaces/IItemData\";\r\nimport CartState from \"../../store/CartState\";\r\nimport OrdersPageState from \"../../store/OrdersPageState\";\r\nimport EmptyCart from \"../../components/svg/EmptyCart\";\r\nimport CatalogLink from \"../../components/buttons/CatalogLink/CatalogLink\";\r\nimport CartItem from \"../../components/Cart/CartItem/CartItem\";\r\nimport \"./Cart.scss\";\r\nimport StatusEmptyBlock from \"../StatusEmptyBlock/StatusEmptyBlock\";\r\nimport BackBtn from \"../buttons/BackBtn/BackBtn\";\r\nimport ClearCartBtn from \"../buttons/ClearCartBtn/ClearCartBtn\";\r\n\r\nconst Cart = observer(() => {\r\n    const { cartItems, priceSum } = CartState;\r\n    const { itemsFromCart } = OrdersPageState;\r\n    const navigate = useNavigate();\r\n    const goBack = () => navigate(-1);\r\n\r\n    const [isOrderSuccess, setIsOrderSuccess] = useState(false);\r\n\r\n\r\n\r\n    const makeOrder = () => {\r\n        OrdersPageState.setItemsFromCart([...itemsFromCart.concat([CartState.cartItems])]);\r\n        OrdersPageState.setOrderSum(priceSum);\r\n        setIsOrderSuccess(true);\r\n        CartState.setCartItems([]);\r\n        CartState.setPriceSum(0);\r\n        OrdersPageState.setOrderDate(new Date().toLocaleDateString());\r\n        window.scrollTo(0, 0);\r\n    };\r\n\r\n    return (\r\n        <div className=\"cart\">\r\n            {isOrderSuccess ? (\r\n                <div className=\"order-success\">\r\n                    <p className=\"order-success__title\">\r\n                        Заказ №{OrdersPageState.itemsFromCart.length} успешно оформлен\r\n                    </p>\r\n                    <p className=\"order-success__description\">\r\n                        Отследить статус можно в\r\n                        <Link to=\"/orders-page\">\r\n                            <span className=\"order-success__link\">Истории заказов</span>\r\n                        </Link>\r\n                    </p>\r\n                    <div className=\"order-success__btns-wrap\">\r\n                        <Link to=\"/orders-page\">\r\n                            <button className=\"order-success__to-order-btn stroked-btn\">К заказу</button>\r\n                        </Link>\r\n                        <CatalogLink btnName=\"Продолжить покупки\" />\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"cart__inner\">\r\n                    <h2 className=\"cart__title section-title\">Корзина</h2>\r\n                    <div className=\"cart__btns-wrap\">\r\n                        <BackBtn btnName=\"Вернуться назад\" />\r\n                        {cartItems.length > 0 ? (\r\n                            <ClearCartBtn />\r\n                        ) : <CatalogLink btnName=\"Перейти в каталог\" />}\r\n                    </div>\r\n                    <ul className=\"cart__list\">\r\n                        {cartItems.length === 0 ? (\r\n                            <StatusEmptyBlock title={\"В корзину ничего не добавлено\"} image={<EmptyCart />} />\r\n                        ) : (\r\n                            cartItems.map((item: IItemData) => {\r\n                                return (\r\n                                    <li>\r\n                                        <CartItem item={item} />\r\n                                    </li>\r\n                                );\r\n                            })\r\n                        )}\r\n                    </ul>\r\n                    {cartItems.length > 0 ? (\r\n                        <>\r\n                            <div className=\"cart__price-block total-price-block\">\r\n                                <p className=\"total-price-block__items-count\">Итого: </p>\r\n                                <b className=\"total-price-block__price\">{CartState.priceSum} руб.</b>\r\n                            </div>\r\n                            <button onClick={makeOrder} className=\"cart__checkout-btn\">\r\n                                Оформить\r\n                            </button>\r\n                        </>\r\n                    ) : null}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}